<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          JPA가 지원하는 엔티티 매핑 - JunBlog
        
    </title>

    <link rel="canonical" href="http://yoursite-url/2019/09/17/JPA가-지원하는-엔티티-매핑/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('null')
            /*post*/
        
    }
    
    #signature{
        background-image: url('/img/signature/BeanTechSign-white.png');
    }
    
</style>

<header class="intro-header">
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#기본키 생성전략" title="기본키 생성전략">기본키 생성전략</a>
                            
                              <a class="tag" href="/tags/#엔터티 매핑" title="엔터티 매핑">엔터티 매핑</a>
                            
                              <a class="tag" href="/tags/#DDL 생성기능" title="DDL 생성기능">DDL 생성기능</a>
                            
                        </div>
                        <h1>JPA가 지원하는 엔티티 매핑</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Jun Young on
                            2019-09-17
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">JunYoung&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2><span id="엔터티-매핑">엔터티 매핑</span></h2>
<p>JPA를 사용하는데 가장 중요한 일은 엔티티와 테이블을 정확히 매핑하는 일입니다.<br>
매핑 어노테이션을 숙지하고 사용해야 하는데 JPA는 다양한 매핑 어노테이션을 지원합니다.<br>
아래와 같이 크게 4가지로 분류할 수 있습니다.</p>
<ul>
<li>객체와 테이블 매핑: @Entity, @Table</li>
<li>기본 키 매핑: @Id</li>
<li>필드와 컬럼 매핑: @Column</li>
<li>연관관계 매핑: @ManyToOne, @JoinColumn, @OneToMany</li>
</ul>
<h3><span id="entity">@Entity</span></h3>
<p>JPA를 사용해서 테이블과 매핑할 클래스는 @Entity 어노테이션을 필수로 붙여야 합니다.<br>
@Entity가 붙은 클래스는 JPA가 관리하는 것으로, 엔터티라 부릅니다.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><center>속성</center></th>
<th style="text-align:center"><center>기능</center></th>
<th style="text-align:right"><center>기본값</center></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><cemter>name</cemter></td>
<td style="text-align:center"><center>JPA에서 사용할 엔터티 이름을 지정한다. 보통 기본값인 클래스 이름을 사용한다. 만약 다른 패키지에 이름이 같은 엔터티 클래스가 있다면 이름을 지정해서 충돌하지 않도록 해야 한다.</center></td>
<td style="text-align:right"><center>설정하지 않으면 클래스 이름을 그대로 사용합니다.</center></td>
</tr>
</tbody>
</table>
<p>@Entity 적용 시 주의사항</p>
<ul>
<li>기본 생성자는 필수다(파라미터가 없는 public 또는 protected 생성자).</li>
<li>final 클래스, enum, interface, innter 클래스에는 사용 할 수 없다.</li>
<li>저장할 필드에 final을 사용하면 안 된다.</li>
</ul>
<p>JPA가 엔터티 객체를 생성할 때 기본 생성자를 사용하므로 이 생성자는 반드시 있어야 합니다. 자바는 생성자가 하나도 없으면 다음과 같이 기본 생성자를 자동으로 만듭니다.<br>
ex)<br>
publiic Member() {} //기본 생성자</p>
<p>만약 생성자를 하나 이상 만들면 자바는 기본 생성자를 자동으로 만들지 않기 때문에 이때는 개발자가 직접 기본 생성자를 만들어야 합니다.</p>
<p>public Member() {} //직접 만든 기본 생성자</p>
<p>//임의의 생성자<br>
public Member(String name){<br>
<a href="http://this.name" target="_blank" rel="noopener">this.name</a> = name;<br>
}</p>
<h3><span id="table">@Table</span></h3>
<p>@Table은 엔터티와 매핑할 테이블을 지정한다. 생략하면 매핑한 엔터티 이름을 테이블 이름으로 사용합니다.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><center>속성</center></th>
<th style="text-align:center"><center>기능</center></th>
<th style="text-align:right"><center>기본값</center></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:center"><center>매핑할 테이블 이름</center></td>
<td style="text-align:right"><center>엔터티 이름을 사용한다.</center></td>
</tr>
<tr>
<td style="text-align:left">catalog</td>
<td style="text-align:center"><center>catalog 기능이 있는 데이터베이스에서 catalog를 매핑한다.</center></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:left">schema</td>
<td style="text-align:center"><center>schema 기능이 있는 데이터베이스에서 schema를 매핑한다.</center></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:left">uniqueConstraints</td>
<td style="text-align:center"><center>DDL 생성 시에 유니크 제약조건을 만든다. 2개 이상의 복합 유니크 제약조건도 만들 수 있다. 참고로 이 기능은 스키마 자동생성 기능을 사용해서 DDL을 만들 때만 사용한다.</center></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3><span id="다양한-매핑-사용">다양한 매핑 사용</span></h3>
<p>JPA 시작하기 장에서 개발하던 회원 관리 프로그램에 다음 요구사항이 추가 되었습니다.</p>
<ol>
<li>회원은 일반 회원과 관리자로 구분됩니다.</li>
<li>회원 가입일과 수정일이 있어야 합니다.</li>
<li>회원을 설명할 수 있는 필드가 있어야 합니다. 이 필드는 길이 제한이 없습니다.</li>
</ol>
<p>아래와 같이 위 요구사항을 만족하는 회원 엔터티에 기능을 추가 할 수 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"MEMBER"</span>) <span class="comment">// Member 엔티티를 테이블 명 MEMBER로 매핑</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">@<span class="title">Id</span> //인스턴스 변수 <span class="title">id</span>를 <span class="title">DB</span> 테이블 <span class="title">MEMBER</span> 기본키 <span class="title">ID</span>로 매핑</span></span><br><span class="line"><span class="class">@<span class="title">Column</span>(<span class="title">name</span> </span>= <span class="string">"ID"</span>)</span><br><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Column</span>(name = <span class="string">"NAME"</span>)</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer age;</span><br><span class="line"><span class="comment">//자바의  enum을 사용해서 회원의 타입을 구분하였습니다. 일반 회원은 USER, 관리자는</span></span><br><span class="line"><span class="comment">//ADMIN입니다. 자바의 enum을 사용하려면 @Enumerated 어노테이션으로 매핑해야 합니다.</span></span><br><span class="line"><span class="meta">@Enumerated</span>(EnumType.STRING)</span><br><span class="line"><span class="keyword">private</span> RoleType roleType;</span><br><span class="line"></span><br><span class="line"><span class="comment">//자바의 날짜 타입은 @Temporal을 사용해서 매핑해야 합니다. </span></span><br><span class="line"><span class="meta">@Temporal</span>(TemporalType.TIMESTAMP)</span><br><span class="line"><span class="keyword">private</span> Date createDate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Temporal</span>(TemporalType.TIMESTAMP)</span><br><span class="line"><span class="keyword">private</span> Date lastModifiedDate;</span><br><span class="line"></span><br><span class="line"><span class="comment">//회원을 설명하는 필드는 길이 제한이 없고, 따라서 데이터베이스 varchar 타입 대신에</span></span><br><span class="line"><span class="comment">//CLOB 타입으로 저장해야 합니다. @Lob를 사용한다면 CLOB, BLOB 타입을 매핑할 수 있습니다.</span></span><br><span class="line"><span class="meta">@Lob</span></span><br><span class="line"><span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> RoleType&#123;</span><br><span class="line">    ADMIN, USER</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="데이터베이스-스키마-자동-생성-기능">데이터베이스 스키마 자동 생성 기능</span></h3>
<p>JPA는 데이터베이스 스키마를 자동으로 생성하는 기능을 지원합니다. 클래스의 매핑정보를 보면 어떤 테이블에 어떤 컬럼을 사용하는지 알 수 있습니다. JPA는 이 매핑정보와 데이터베이스 방언을 사용해서 데이터베이스 스키마를 생성합니다.</p>
<p>저 같은경우에는 스프링 부트에서 생성한 application.yml 파일에 아래와 같이 정의합니다.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  jpa:</span></span><br><span class="line"><span class="attr">    hibernate:</span></span><br><span class="line"><span class="attr">      ddl-auto:</span> <span class="string">create</span></span><br></pre></td></tr></table></figure>
<p>이 속성을 추가하면 어플리케이션 실행 시점에 데이터베이스 테이블을 자동으로 생성합니다.</p>
<h4><span id="hibernateddl-auto-속성">hibernate.ddl-auto 속성</span></h4>
<table>
<thead>
<tr>
<th style="text-align:left"><center>옵션</center></th>
<th style="text-align:center"><center>설명</center></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">create</td>
<td style="text-align:center"><center>기존 테이블을 삭제하고 새로 생성한다. DROP + CREATE </center></td>
</tr>
<tr>
<td style="text-align:left">create-drop</td>
<td style="text-align:center"><center>create 속성에 추가로 어플리케이션을 종료할 때 생성한 DDL을 제거한다. DROP + CREATE + DROP</center></td>
</tr>
<tr>
<td style="text-align:left">update</td>
<td style="text-align:center"><center>데이터베이스 테이블과 엔터티 매핑정보를 비교해서 변경 사항만 수정한다.</center></td>
</tr>
<tr>
<td style="text-align:left">validate</td>
<td style="text-align:center"><center>데이터베이스 테이블과 엔터티 매핑정보를 비교해서 차이가 있으면 경고를 남기고 애플리케이션을 실행하지 않는다. 이설정은 DDL을 수정하지 않는다.</center></td>
</tr>
<tr>
<td style="text-align:left">none</td>
<td style="text-align:center"><center>자동 생성 기능을 사용하지 않으려면 hibernate.ddl-auto 속성 자체를 삭제하거나 유효하지 않는 옵션 값을 주면 된다.<center></center></center></td>
</tr>
</tbody>
</table>
<blockquote>
<p>운영 서버에서 create, create-drop, update처럼 DDL을 수정하는 옵션은 절대 사용하면 안됩니다. 오직 개발 서버나 개발 단계에서만 사용해야 합니다. 이 옵션들은 운영 중인 데이터베이스 컬럼을 삭제할 수 있기 때문입니다.</p>
</blockquote>
<ul>
<li>개발 초기 단계는 create 또는 update</li>
<li>초기화 상태로 자동화된 테스트를 진행하는 개발자 환경과 CI 서버는 create 또는 create-drop</li>
<li>테스트 서버는 update 또는 validate</li>
<li>스테이징과 운영 서버는 validate 또는 none</li>
</ul>
<h3><span id="ddl-생성-기능">DDL 생성 기능</span></h3>
<p>회원 이름은 필수로 입력되어야 하고, 10자를 초과하면 안 되는 제약조건이 추가되었습니다.<br>
스키마 자동 생성하기를 통해 만들어지는  DDL에 이 제약조건을 추가해 봅시다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"MEMBER"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"NAME"</span>, nullable = <span class="keyword">false</span>, length = <span class="number">10</span>) <span class="comment">// 추가</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 코드에서 @Column 매핑정보의 nullable 속성 값을 false로 지정하면 자동 생성되는 DDL에 not null 제약조건을 추가할 수 있습니다. 그리고 length 속성 값을 사용하면 자동 생성되는 DDL에 문자의 크기를 지정할 수 도 있습니다.</p>
<h3><span id="기본키-매핑">기본키 매핑</span></h3>
<p>JPA가 제공하는 데이터베이스 기본 키 생성 전략은 다음과 같습니다.</p>
<ul>
<li>직접할당:  기본 키를 어플리케이션에서 직접 할당합니다.</li>
<li>자동생성: 대리 키 사용 방식</li>
</ul>
<p>IDENTITY: 기본 키 생성을 데이터베이스에 위임한다.</p>
<p>SEQUENCE: 데이터베이스 시퀀스를 사용해서 기본 키를 할당한다.</p>
<p>TABLE: 키 생성 테이블을 사용한다.</p>
<p>자동 생성 전략이 이렇게 다양한 이유는 데이터베이스 벤더마다 지원하는 방식이 다르기 때문입니다. 오라클은 시퀀스를 제공하지만, MySQL은 시퀀스를 제공하지 않고 대신에 기본 키 값을 자동으로 채워주는 AUTO_INCREMENT 기능을 제공합니다. 따라서 SEQUENCE나 IDENTITY 전략은 사용하는 데이터베이스에 의존합니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IDENTITY 매핑 코드</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Board</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IDENTITY 사용 코드</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">logic</span><span class="params">(EntityManager em)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Board board = <span class="keyword">new</span> Board();</span><br><span class="line">    em.save(board);</span><br><span class="line">    System.out.println(<span class="string">"board.id = "</span> + board.getId());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//출력: board.id = 1</span></span><br></pre></td></tr></table></figure>
<p>위의 코드는  em.save()를 호출해서 엔터티를 저장한 직후에 할당된 식별자 값을 출력하였습니다. 출력된 값 1은 저장 시점에 데이터베이스가 생성한 값을 JPA가 조회한 것입니다.</p>
<h4><span id="identity-전략과-최적화">IDENTITY 전략과 최적화</span></h4>
<p>IDENTITY 전략은 데이터를 데이터베이스에 INSERT한 후에 기본 키 값을 조회할 수 있다.따라서 엔터티에 식별자 값을 할당하려면 JPA는 추가로 데이터베이스를 조회해야 합니다.</p>
<blockquote>
<p>주의사항<br>
엔터티가 영속 상태가 되려면 식별자가 반드시 필요합니다. 그런데 IDENTITY 식별자 생성 전략은 엔터티를 데이터베이스에 저장해야 식별자를 구할 수 있으므로 em.save()를 호출하는 즉시 INSERT SQL이 데이터베이스에 전달됩니다. 따라서 이전 략은 트랜잭션을 지원하는 쓰기지연이 동작하지 않습니다.</p>
</blockquote>
<h4><span id="sequence-전략">SEQUENCE 전략</span></h4>
<p>데이터베이스 시퀀스는 유일한 값을 순서대로 생성하는 특별한 데이터베이스 오브젝트 입니다.<br>
SEQUENCE 전략은 이 시퀀스를 사용해서 기본 키를 생성합니다. 이 전략은 시퀀스를 지원하는 오라클, H2, PostgreSQL에서 사용할 수 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@SequenceGenerator</span>(</span><br><span class="line">    name = <span class="string">"BOARD_SEQ_GENERATOR"</span>,</span><br><span class="line">    sequenceName = <span class="string">"BOARD_SEQ"</span>, <span class="comment">//매핑할 데이터베이스 시퀀스 이름</span></span><br><span class="line">    initialValue = <span class="number">1</span>, allocationSize = <span class="number">1</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Board</span></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.SEQUENCE,</span><br><span class="line">    generator = <span class="string">"BOARD_SEQ_GENERATOR"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위의 코드에서 BOARD_SEQ_GENERATOR라는 시퀀스 생성기를 등록했습니다. 이 시퀀스 생성기를 실제 데이터베이스 BOARD_SEQ 시퀀스와 매핑합니다.<br>
이제부터 id 식별자 값은 BOARD_SEQ_GENERATOR 시퀀스 생성기가 할당합니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SEQUENCE 사용 코드</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">logic</span><span class="params">(EntityManager em)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Board board = <span class="keyword">new</span> Board();</span><br><span class="line">    em.save(board);</span><br><span class="line">    System.out.println(<span class="string">"board.id = "</span> + board.getId());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//출력: board.id = 1</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>IDENTITY 전략과 SEQUENCE 전략의 차이점<br>
시퀀스 사용코드는 IDENTITY 전략과 같지만 내부 동작 방식은 다릅니다. SEQUENCE 전략은 em.save()를 호출 할 때 먼저 데이터베이스 시퀀스를 사용해서 식별자를 조회합니다. 그리고 조회한 식별자를 엔터티에 할당한 후에 엔터티를 영속성 컨텍스트에 저장합니다. 이후 트랜잭션을 커밋해서 플러시가 일어나면 데이터베이스에 저장을 합니다. 반대로 이전에 설명했던 IDENTITY 전략은 먼저 엔터티를 데이터 베이스에 저장한 후에 식별자를 조회해서 엔터티의 식별자에 할당합니다.</p>
</blockquote>
<h3><span id="필드와-컬럼-매핑-레퍼런스">필드와 컬럼 매핑: 레퍼런스</span></h3>
<h4><span id="enumerated">@Enumerated</span></h4>
<p>자바의 enum 타입을 매핑할 때 사용합니다.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><center>속성</center></th>
<th style="text-align:center"><center>기능</center></th>
<th style="text-align:right"><center>기본값</center></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">value</td>
<td style="text-align:center"><center>EnumType.ORIGINAL: enum 순서를 데이터베이스에 저장 EnumType.STRING: enum 이름을 데이터베이스에 저장</center></td>
<td style="text-align:right"><center>EnumType.ORIGINAL</center></td>
</tr>
</tbody>
</table>
<p>ex)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> RoleType&#123;</span><br><span class="line">    ADMIN, USER</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>다음은 enum 이름으로 매핑합니다.<br>
@Enumerated(EnumType.STRING)<br>
private RoleType roleType;</p>
<p>member.setRoleType(RoleType.ADMIN); //-&gt; DB에 문자 ADMIN으로 저장됩니다.</p>
<p>@Enumerated를 사용하면 편리하게 enum 타입을 데이터베이스에 저장할 수 있습니다.</p>
<p>EnumType.ORDINAL은 enum에 정의된 순서대로 ADMIN은 0, USER은 1값이 데이터베이스에 저장됩니다.</p>
<ul>
<li>장점: 데이터베이스에 저장되는 데이터 크기가 작습니다.</li>
<li>단점: 이미 저장된 enum의 순서를 변경할 수 없습니다.</li>
</ul>
<p>EnumType.STRING은 enum 이름 그대로 ADMIN은 ‘ADMIN’, USER는 'USER’라는 문자로 데이터베이스에 저장된다.</p>
<ul>
<li>장점: 저장된 enum의 순서가 바뀌거나 enum이 추가되어도 안전합니다.</li>
<li>단점: 데이터베이스에 저장되는 데이터 크기가 ORDINAL에 비해서 큽니다.</li>
</ul>
<h4><span id="transient">@Transient</span></h4>
<p>이 필드는 매핑하지 않습니다. 따라서 데이터베이스에 저장하지 않고 조회되지도 않습니다. 객체에 임시로 어떤값을 보관하고 싶을때 사용합니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transient</span></span><br><span class="line"><span class="keyword">private</span> Integer temp;</span><br></pre></td></tr></table></figure>
<h4><span id="access">@Access</span></h4>
<p>JPA가 엔터티 테이블에 접근하는 방식을 지정합니다.<br>
테이블에 매핑할때 필드에 적용된 매핑정보를 읽은 다음에 테이블에 매핑을 하기 때문에 필드 접근방식을 지정하는 방법을 다르게 설정할 수 있습니다.</p>
<ul>
<li>
<p>필드 접근: AccessType.FIELD로 지정합니다. 필드에 직접 접근합니다. 필드 접근 권한이 private이어도 접근할 수 있습니다.</p>
</li>
<li>
<p>프로퍼티 접근: AccessType.PROPERTY로 지정합니다. 접근자 Getter를 사용합니다.</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//필드 접근 코드</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Access</span>(AccessType.FIELD)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String data1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String data2;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Id가 필드에 있으므로 @Access(AccessType.FIELD)로 설정한 것과 같습니다. 따라서 @Access는 생략해도 됩니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//프로퍼티 접근 코드</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Access</span>(AccessType.PROPERTY)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span></span>&#123;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String data1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String data2;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Id</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> id;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Column</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getData1</span><span class="params">()</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> data1;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getData2</span><span class="params">()</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> data2;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Id가 프로퍼티에 있으므로 @Access(AccessType.PROPERTY)로 설정한 것과 같습니다. @Access는 생략해도 됩니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//필드, 프로퍼티 접근 코드 함께 사용</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transient</span></span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transient</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Access</span>(AccessType.PROPERTY)</span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getFullName</span><span class="params">()</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> firstName + lastName;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Id가 필드에 있으므로 기본은 필드 접근 방식을 사용하고, getFullName()만 프로퍼티 접근 방식을 사용합니다. 따라서 회원 엔터티를 저장하면 회원 테이블의 FULLNAME 컬럼에 firstName + lastName의 결과가 저장됩니다.</p>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    
                        <li class="next">
                            <a href="/2019/06/17/JPA가-제공하는-영속성-컨텍스트의-특징과-장점/" data-toggle="tooltip" data-placement="top" title="JPA가 제공하는 영속성 컨텍스트의 특징과 장점">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">엔터티 매핑</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">@Entity</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">@Table</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">다양한 매핑 사용</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">데이터베이스 스키마 자동 생성 기능</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.4.1.</span> <span class="toc-nav-text">hibernate.ddl-auto 속성</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">DDL 생성 기능</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text">기본키 매핑</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.6.1.</span> <span class="toc-nav-text">IDENTITY 전략과 최적화</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.6.2.</span> <span class="toc-nav-text">SEQUENCE 전략</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.7.</span> <span class="toc-nav-text">필드와 컬럼 매핑: 레퍼런스</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.7.1.</span> <span class="toc-nav-text">@Enumerated</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.7.2.</span> <span class="toc-nav-text">@Transient</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.7.3.</span> <span class="toc-nav-text">@Access</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#기본키 생성전략" title="기본키 생성전략">기본키 생성전략</a>
                        
                          <a class="tag" href="/tags/#엔터티 매핑" title="엔터티 매핑">엔터티 매핑</a>
                        
                          <a class="tag" href="/tags/#DDL 생성기능" title="DDL 생성기능">DDL 생성기능</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://github.com/minwan1" target="_blank">Wan</a></li>
                    
                        <li><a href="https://github.com/cheese10yun" target="_blank">Yun</a></li>
                    
                        <li><a href="https://github.com/sa1341" target="_blank">Jun</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "JunYoungsBlog";
    var disqus_identifier = "http://yoursite-url/2019/09/17/JPA가-지원하는-엔티티-매핑/";
    var disqus_url = "http://yoursite-url/2019/09/17/JPA가-지원하는-엔티티-매핑/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank" href="https://github.com/sa1341">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Jun Young 2019 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://beantech.org">BeanTech</a> | 
                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=YenYuHsuan&repo=hexo-theme-beantech&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://yoursite-url/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="http://yoursite-url/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
